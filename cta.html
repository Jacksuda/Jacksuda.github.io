<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Peem's Bistro â€” Order</title>
<link rel="stylesheet" href="stylesheet/style.css">
<h1>Order Now</h1>
</head>
<body>
<header class="page-header">
	<nav>
		<ul>
			<li><a href="index.html">Home</a></li> &nbsp
			<li><a href="menu.html">Menu</a></li> &nbsp
			<!--<li><a href="reservations.html">Reservations</a></li> &nbsp-->
			<li><a href="contact.html">Contact</a></li> &nbsp
			<!--<li><a href="event.html">Event/News</a></li> &nbsp-->
			<li><a href="cta.html" class="call2action">ORDER NOW</a></li> &nbsp
		</ul>	
	</nav>
</header>
<body>
<script>
function formValidate() {
	const phoneRegex = /^[0-9]{10}$/; //RegEx for 10 Digits Number, can replace with "/^\(?(\d{3})\)?[-.\s]?(\d{3})[-.\s]?(\d{4})$/" for various forms of US Phone Number
	const zipRegex = /^\d{5}$/; // RegEx for exactly 5 Digits Number
	const a = document.forms["ctaForm"]["order_fname"].value;
	const b = document.forms["ctaForm"]["order_lname"].value;
	const c = document.forms["ctaForm"]["order_phone"].value;
	const d = document.forms["ctaForm"]["delivery_address"].value;
	const e = document.forms["ctaForm"]["city_address"].value;
	const f = document.forms["ctaForm"]["zip_address"].value;
	
	// Function to capitalize the first letter
	const capitalize = (str) => {
		if (!str) return "";
		return str.charAt(0).toUpperCase() + str.slice(1);
	}
	
	// Ensuring that customer ordered at least 1 item
	const qty1 = parseInt(document.forms["ctaForm"]["item1_qty"].value);
    const qty2 = parseInt(document.forms["ctaForm"]["item2_qty"].value);
    const qty3 = parseInt(document.forms["ctaForm"]["item3_qty"].value);
    const qty4 = parseInt(document.forms["ctaForm"]["item4_qty"].value);
    const qty5 = parseInt(document.forms["ctaForm"]["item5_qty"].value);
	
	// Calculate total items ordered
	const totalItems = qty1 + qty2 + qty3 + qty4 + qty5;
	
	// First Name Validation
	if (a == "") {
		alert("First Name must be filled out");
		return false;
	} else {
		const capitalizedFName = capitalize(a);
		document.forms["ctaForm"]["order_fname"].value = capitalizedFName; // Capitalized first name
	}
	// Last Name Validation
	if (b == "") {
		alert("Last Name must be filled out");
		return false;
	} else {
		const capitalizedLName = capitalize(b);
		document.forms["ctaForm"]["order_lname"].value = capitalizedLName; // Capitalized last name
	}
	// Phone Number Validation
	if (c == "") {
		alert("Phone number must be filled out");
		return false;
	} else if (!phoneRegex.test(c)) {
			alert("Please enter 10-digits phone number");
			return false;
		}
	// Address Validation
	if (d == "") {
		alert("Address field must be filled out");
		return false;
	}
	// City Name Validation
	if (e == "") {
		alert("City field must be filled out");
		return false;
	} else {
		const capitalizedCName = capitalize(e);
		document.forms["ctaForm"]["city_address"].value = capitalizedCName; // Capitalized City name
	}
	// Zip Code Validation
	if (f == "") {
		alert("Zip Code field must be filled out");
		return false;
	} else if (!zipRegex.test(f)) { 
		alert("Please enter exactly 5 digits Zip Code");
		return false;
	}
	// Validating Number of items ordered
	if (totalItems < 1) {
        alert("Please order at least one item to proceed");
        return false;
	}
	
	// If all passes
	return alert("Thank you for patronage")
}
</script>
	<main class="cta-main">	
		<section class="order-form-section">
			<a id="order"></a> 
			<h3>Place Your Online Order</h3>
			
			<form name="ctaForm" onsubmit="return formValidate()" method="post" form action="./submit-order.html" class="order-form">
				<fieldset>
					<legend>Contact Information</legend>
					<label for="order-name">First Name:</label>
					<input type="text" id="order-name" name="order_fname">
					
					<label for="order-name">Last Name:</label>
					<input type="text" id="order-name" name="order_lname">
					
					<label for="order-phone">Phone:</label>
					<input type="tel" id="order-phone" name="order_phone">
					
					<label for="delivery">Delivery Address:</label>
					<textarea id="delivery" name="delivery_address" rows="3" placeholder="No., Street"></textarea>
					<p>
					<label for="city">City:</label>
					<input type="text" id="city-address" name="city_address">
					
					<label for="zip">Zip Code:</label>
					<input type="text" id="zip-address" name="zip_address">
					
				</fieldset>
				
				<fieldset>
					<legend>Your Order</legend>
					<label for="item1">Bruschetta ($8.00):</label>
					<input type="number" id="item1" name="item1_qty" min="0" max="10" value="0">
					
					<label for="item2">Soup of the Day ($7.00):</label>
					<input type="number" id="item2" name="item2_qty" min="0" max="10" value="0">
					
					<label for="item2">Seasonal Roast ($18.00):</label>
					<input type="number" id="item3" name="item3_qty" min="0" max="10" value="0">
					
					<label for="item2">Honey Glazed Salmon ($22.00):</label>
					<input type="number" id="item4" name="item4_qty" min="0" max="10" value="0">
					
					<label for="item2">Chocolate Tart ($9.00):</label>
					<input type="number" id="item5" name="item5_qty" min="0" max="10" value="0">
					
					<label for="notes">Special Notes (Allergies, etc.):</label>
					<textarea id="notes" name="order_notes" rows="2"></textarea>
				</fieldset>
				
				<input type="submit" value="Place Order">
			</form>
		</section>

	</main>
	
	<footer>
		<a href="mailto:chooprasit.s@northeastern.edu">chooprasit.s@northeastern.edu</a>
	</footer>
	</body>
</html>
